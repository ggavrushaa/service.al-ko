"use strict";window.addEventListener("load",(function(){var e=document.querySelectorAll(".sidebar .btn-size-holder"),t=document.querySelector(".sidebar");e.length&&e.forEach((function(e){e.addEventListener("click",(function(){t.classList.toggle("active"),t.classList.contains("active")?(document.documentElement.style.setProperty("--sidebar-width","64px"),setCookie("sidebar","small",{secure:!0,"max-age":2592e3})):(document.documentElement.style.removeProperty("--sidebar-width"),deleteCookie("sidebar"))}))})),getCookie("sidebar")&&(t.classList.add("active"),document.documentElement.style.setProperty("--sidebar-width","64px")),document.addEventListener("click",(function(e){null===e.target.closest(".search-block")&&n&&n.classList.remove("show-form")})),document.querySelector(".pagination")&&document.documentElement.style.setProperty("--pagination-height",document.querySelector(".pagination").clientHeight+"px"),document.querySelector(".page-name")&&document.documentElement.style.setProperty("--page-name-height",document.querySelector(".page-name").clientHeight+"px");var n=document.querySelector(".search-block"),o=document.querySelector(".search-block__result");n&&o.addEventListener("click",(function(e){null===e.target.closest(".placeholder-item")&&n.classList.toggle("show-form")})),document.querySelectorAll("._js-show-filters").length&&document.querySelectorAll("._js-show-filters").forEach((function(e){e.addEventListener("click",(function(){document.querySelector(".filters").classList.toggle("active"),t.classList.toggle("hide-btn"),t.classList.contains("active")&&(t.classList.remove("active"),document.documentElement.style.removeProperty("--sidebar-width"),deleteCookie("sidebar")),setTimeout((function(){datepickerPositionInScroll()}),500)}))}));var r=document.querySelectorAll("select");r.length>0&&r.forEach((function(e){e.querySelector('option[value="-1"]')&&("-1"===e.value&&e.closest(".form-group").classList.add("show-placeholder"),e.addEventListener("change",(function(){"-1"===e.value?e.closest(".form-group").classList.add("show-placeholder"):e.closest(".form-group").classList.remove("show-placeholder")})))}))}));var fileInput=document.querySelector(".form-group.file input"),fileCountUploaded=0,maxFileCount=1e3,uploadedFileList=[];function handleFiles(){var e=this,t=this.files,n=this.closest(".form-group"),o=n.querySelector(".help-block");console.log(e.files);var r=validationFiles(t,["jpg","jpeg","png"],5e6);if(n.classList.remove("has-error"),r.status||(1===r.text_status?o.innerHTML=o.dataset.errorFormat:2===r.text_status&&(o.innerHTML=o.dataset.errorSize),n.classList.add("has-error")),r.files.length>0)if(r.files.length<=maxFileCount&&fileCountUploaded<=maxFileCount&&r.files.length+fileCountUploaded<=maxFileCount){Object.values(r.files).forEach((function(e){uploadedFileList.push(e)})),e.value="";var i=e.cloneNode(!0);e.replaceWith(i),(e=i).addEventListener("change",handleFiles),(fileCountUploaded+=r.files.length)<maxFileCount&&this.removeEventListener("change",handleFiles),fileCountUploaded===maxFileCount&&n.classList.add("_no-clickable")}else o.innerHTML=o.dataset.errorMaxCount,n.classList.add("has-error");else console.log("Photo not valid");drawUploadedPhoto(uploadedFileList)}function drawUploadedPhoto(e,t){var n=document.querySelector(".image-preview"),o=n.closest("form");function r(){var t=this.dataset.index;t&&(e.splice(t,1),drawUploadedPhoto(e))}n.innerHTML="",console.log(o),e.length>0&&e.forEach((function(e,t){var i=new FileReader;if(i.addEventListener("loadend",(function(e){var o=document.createElement("div");o.className="img";var a=document.createElement("button");a.type="button",a.className="icon-trash",a.dataset.index=t,a.addEventListener("click",r);var l=document.createElement("img");l.src=i.result,o.insertAdjacentElement("beforeend",l),o.insertAdjacentElement("beforeend",a),n.insertAdjacentElement("beforeend",o)})),i.readAsDataURL(e),o){var a=new FormData(o),l=new Blob([e],{type:e.type});a.append("files[]",l,e.name)}}))}function validationFiles(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!0,i="",a=[],l=0,s=0;s<e.length;s++){e[s].type;var c=e[s].size,d=e[s].name;if(!(c<=n)){r=!1,i="The photo size is more than 5 mb",l=2;break}if(!t.includes(d.split(".").pop())){r=!1,i="Inappropriate image format",l=1;break}a.push(e[s])}return null!==o&&e.length>o&&a.splice(o,e.length-o),{status:r,text_error:i,files:a,text_status:l}}fileInput&&fileInput.addEventListener("change",handleFiles,!1),document.querySelectorAll(".btn-password-visible").length>0&&document.querySelectorAll(".btn-password-visible").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".form-group").querySelector("input");e.classList.remove("btn-password-visible"),"password"===t.type?(t.type="text",e.classList.remove("icon-visible"),e.classList.add("icon-invisible","btn-password-visible")):(t.type="password",e.classList.add("icon-visible","btn-password-visible"),e.classList.remove("icon-invisible"))}))}));var datepickerInputs=document.querySelectorAll("._js-datepicker");function datepickerPositionInScroll(){datepickerInputs.length>0&&datepickerInputs.forEach((function(e){var t=document.querySelector("#".concat(e.dataset.containerId));t&&(t.style.setProperty("--left-datepicker",e.getBoundingClientRect().left+"px"),t.style.setProperty("--top-datepicker",e.getBoundingClientRect().top+e.getBoundingClientRect().height+4+"px"))}))}datepickerInputs.length>0&&datepickerInputs.forEach((function(e,t){var n=document.createElement("div");n.className="datepicker-container",n.id="datepicker-container-"+t,document.body.insertAdjacentElement("beforeend",n),e.dataset.containerId="datepicker-container-"+t,new Datepicker(e,{container:"#datepicker-container-"+t,autohide:!0,format:"yyyy-mm-dd"}),e.addEventListener("input",(function(){e.value=""})),setTimeout((function(){datepickerPositionInScroll()}),1e3)})),document.querySelector(".custom-scrollbar")&&document.querySelectorAll(".custom-scrollbar").forEach((function(e){e.querySelector("._js-datepicker")&&e.addEventListener("scroll",datepickerPositionInScroll)})),window.addEventListener("scroll",datepickerPositionInScroll),document.querySelector(".swiper-gallery")&&new Swiper(".swiper-gallery",{navigation:{nextEl:".gallery-next",prevEl:".gallery-prev"},pagination:{el:".swiper-pagination",type:"fraction"}});var formsValidation=document.querySelectorAll(".js-form-validation");formsValidation.length>0&&formsValidation.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),validateForm(e)&&e.submit()}))}));var btnRequiredSwitcher=document.querySelectorAll(".js-btn-required-switcher");btnRequiredSwitcher.length>0&&btnRequiredSwitcher.forEach((function(e){e.addEventListener("click",(function(){if(e.dataset.requiredSwitcher&&""!==e.dataset.requiredSwitcher){var t,n=e.closest("form");e.getAttribute("form")&&(n=document.getElementById(e.getAttribute("form"))),"add"===e.dataset.requiredSwitcher?t="add":"remove"===e.dataset.requiredSwitcher&&(t="remove"),n&&t&&toggleRequired(n,t)}}))}));var btnsRemoveImage=document.querySelectorAll(".js-remove-image");btnsRemoveImage.length>0&&btnsRemoveImage.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.dataset.action;fetch(n,{method:"post"}).then((function(e){return e.json})).then((function(e){console.log(e)}))}))}));