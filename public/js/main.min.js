"use strict";window.addEventListener("load",(function(){var e=document.querySelectorAll(".sidebar .btn-size-holder"),t=document.querySelector(".sidebar");e.length&&e.forEach((function(e){e.addEventListener("click",(function(){t.classList.toggle("active"),t.classList.contains("active")?(document.documentElement.style.setProperty("--sidebar-width","64px"),setCookie("sidebar","small",{secure:!0,"max-age":2592e3})):(document.documentElement.style.removeProperty("--sidebar-width"),deleteCookie("sidebar"))}))})),getCookie("sidebar")&&(t.classList.add("active"),document.documentElement.style.setProperty("--sidebar-width","64px")),document.addEventListener("click",(function(e){null===e.target.closest(".search-block")&&n&&n.classList.remove("show-form")})),document.querySelector(".pagination")&&document.documentElement.style.setProperty("--pagination-height",document.querySelector(".pagination").clientHeight+"px"),document.querySelector(".page-name")&&document.documentElement.style.setProperty("--page-name-height",document.querySelector(".page-name").clientHeight+"px");var n=document.querySelector(".search-block"),o=document.querySelector(".search-block__result");n&&o.addEventListener("click",(function(e){null===e.target.closest(".placeholder-item")&&n.classList.toggle("show-form")})),document.querySelectorAll("._js-show-filters").length&&document.querySelectorAll("._js-show-filters").forEach((function(e){e.addEventListener("click",(function(){document.querySelector(".filters").classList.toggle("active"),t.classList.toggle("hide-btn"),t.classList.contains("active")&&(t.classList.remove("active"),document.documentElement.style.removeProperty("--sidebar-width"),deleteCookie("sidebar")),setTimeout((function(){datepickerPositionInScroll()}),500)}))}));var i=document.querySelectorAll("select");i.length>0&&i.forEach((function(e){e.querySelector('option[value="-1"]')&&("-1"===e.value&&e.closest(".form-group").classList.add("show-placeholder"),e.addEventListener("change",(function(){"-1"===e.value?e.closest(".form-group").classList.add("show-placeholder"):e.closest(".form-group").classList.remove("show-placeholder")})))}))}));var fileInput=document.querySelector(".form-group.file input"),fileCountUploaded=0,maxFileCount=1e3,uploadedFileList=[];function handleFiles(){var e=this,t=this.files,n=this.closest(".form-group"),o=n.querySelector(".help-block"),i=validationFiles(t,["jpg","jpeg","png"],5e6);if(n.classList.remove("has-error"),i.status||(1===i.text_status?o.innerHTML=o.dataset.errorFormat:2===i.text_status&&(o.innerHTML=o.dataset.errorSize),n.classList.add("has-error")),i.files.length>0)if(i.files.length<=maxFileCount&&fileCountUploaded<=maxFileCount&&i.files.length+fileCountUploaded<=maxFileCount){Object.values(i.files).forEach((function(e){uploadedFileList.push(e)})),e.value="";var r=e.cloneNode(!0);e.replaceWith(r),(e=r).addEventListener("change",handleFiles),(fileCountUploaded+=i.files.length)<maxFileCount&&this.removeEventListener("change",handleFiles),fileCountUploaded===maxFileCount&&n.classList.add("_no-clickable")}else o.innerHTML=o.dataset.errorMaxCount,n.classList.add("has-error");else console.log("Photo not valid");drawUploadedPhoto(uploadedFileList)}function drawUploadedPhoto(e,t){var n=document.querySelector(".image-preview"),o=n.querySelectorAll("._uploaded-image"),i=n.closest("form"),r=document.querySelector("#file"),a=new DataTransfer;function l(){var t=this.dataset.index;t&&(e.splice(t,1),drawUploadedPhoto(e))}i.addEventListener("submit",(function(e){e.preventDefault()})),o.length>0&&o.forEach((function(e){e.remove()})),e.length>0&&e.forEach((function(e,t){var o=new FileReader;o.addEventListener("loadend",(function(e){var i=document.createElement("div");i.className="img _uploaded-image";var r=document.createElement("button");r.type="button",r.className="icon-trash",r.dataset.index=t,r.addEventListener("click",l);var a=document.createElement("img");a.src=o.result,i.insertAdjacentElement("beforeend",a),i.insertAdjacentElement("beforeend",r),n.insertAdjacentElement("beforeend",i)})),o.readAsDataURL(e);var i=new Blob([e],{type:e.type}),s=new File([i],e.name,{type:e.type,lastModified:e.lastModified,size:e.size,webkitRelativePath:e.webkitRelativePath,lastModifiedDate:e.lastModifiedDate});a.items.add(s),r.files=a.files}))}function validationFiles(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!0,r="",a=[],l=0,s=0;s<e.length;s++){e[s].type;var c=e[s].size,d=e[s].name;if(!(c<=n)){i=!1,r="The photo size is more than 5 mb",l=2;break}if(!t.includes(d.split(".").pop())){i=!1,r="Inappropriate image format",l=1;break}a.push(e[s])}return null!==o&&e.length>o&&a.splice(o,e.length-o),{status:i,text_error:r,files:a,text_status:l}}fileInput&&fileInput.addEventListener("change",handleFiles,!1),document.querySelectorAll(".btn-password-visible").length>0&&document.querySelectorAll(".btn-password-visible").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".form-group").querySelector("input");e.classList.remove("btn-password-visible"),"password"===t.type?(t.type="text",e.classList.remove("icon-visible"),e.classList.add("icon-invisible","btn-password-visible")):(t.type="password",e.classList.add("icon-visible","btn-password-visible"),e.classList.remove("icon-invisible"))}))}));var datepickerInputs=document.querySelectorAll("._js-datepicker");function datepickerPositionInScroll(){datepickerInputs.length>0&&datepickerInputs.forEach((function(e){var t=document.querySelector("#".concat(e.dataset.containerId));t&&(t.style.setProperty("--left-datepicker",e.getBoundingClientRect().left+"px"),t.style.setProperty("--top-datepicker",e.getBoundingClientRect().top+e.getBoundingClientRect().height+4+"px"))}))}datepickerInputs.length>0&&datepickerInputs.forEach((function(e,t){var n=document.createElement("div");n.className="datepicker-container",n.id="datepicker-container-"+t,document.body.insertAdjacentElement("beforeend",n),e.dataset.containerId="datepicker-container-"+t,new Datepicker(e,{container:"#datepicker-container-"+t,autohide:!0,format:"yyyy-mm-dd"}),e.addEventListener("input",(function(){e.value=""})),setTimeout((function(){datepickerPositionInScroll()}),1e3)})),document.querySelector(".custom-scrollbar")&&document.querySelectorAll(".custom-scrollbar").forEach((function(e){e.querySelector("._js-datepicker")&&e.addEventListener("scroll",datepickerPositionInScroll)})),window.addEventListener("scroll",datepickerPositionInScroll),document.querySelector(".swiper-gallery")&&new Swiper(".swiper-gallery",{navigation:{nextEl:".gallery-next",prevEl:".gallery-prev"},pagination:{el:".swiper-pagination",type:"fraction"}});var formsValidation=document.querySelectorAll(".js-form-validation");formsValidation.length>0&&formsValidation.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),validateForm(e)&&e.submit()}))})),document.querySelector("._js-button-validation")&&document.querySelectorAll("._js-button-validation").forEach((function(e){var t=e.form;e.addEventListener("click",(function(n){t&&(n.preventDefault(),t.querySelector('input[name="button"]').value=e.value,validateForm(e.form)&&e.form.submit())})),window.addEventListener("keydown",(function(e){if("Enter"===e.key&&null===e.target.closest("textarea"))return e.preventDefault(),!1}))})),$(document).ready((function(){$("._js-select-2").select2(),$("._js-select-2").on("select2:select",(function(e){e.target.dispatchEvent(new Event("change"))}))}));var btnRequiredSwitcher=document.querySelectorAll(".js-btn-required-switcher");btnRequiredSwitcher.length>0&&btnRequiredSwitcher.forEach((function(e){e.addEventListener("click",(function(){if(e.dataset.requiredSwitcher&&""!==e.dataset.requiredSwitcher){var t,n=e.closest("form");e.getAttribute("form")&&(n=document.getElementById(e.getAttribute("form"))),"add"===e.dataset.requiredSwitcher?t="add":"remove"===e.dataset.requiredSwitcher&&(t="remove"),n&&t&&toggleRequired(n,t)}}))}));var btnsRemoveImage=document.querySelectorAll(".js-remove-image");btnsRemoveImage.length>0&&btnsRemoveImage.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.dataset.action;fetch(n,{method:"post",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then((function(e){return e.json()})).then((function(t){t.success&&e.closest(".img").remove()}))}))}));